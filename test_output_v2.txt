=== RUN   TestMappingBuilderGetMapping
=== RUN   TestMappingBuilderGetMapping/jaeger-span
    mapping_test.go:90: 
        	Error Trace:	/media/soumya/DATA/open-source/jaeger/internal/storage/v1/elasticsearch/mappings/mapping_test.go:90
        	Error:      	Not equal: 
        	            	expected: "{\n    \"index_patterns\": [\n        \"test-jaeger-span*\"\n    ],\n    \"priority\": 500,\n    \"template\": {\n        \"settings\": {\n            \"index\": {\n                \"number_of_shards\": 3,\n                \"number_of_replicas\": 3,\n                \"mapping\": {\n                    \"total_fields\": {\n                        \"limit\": 3000\n                    },\n                    \"nested_objects\": {\n                        \"limit\": 50\n                    }\n                },\n                \"default_pipeline\": \"jaeger-trace-time-to-timestamp\",\n                \"lifecycle\": {\n                    \"name\": \"jaeger-test-policy\",\n                    \"rollover_alias\": \"test-jaeger-span-write\"\n                }\n            }\n        },\n        \"mappings\": {\n            \"dynamic_templates\": [\n                {\n                    \"span_tags_map\": {\n                        \"path_match\": \"tag.*\",\n                        \"mapping\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        }\n                    }\n                },\n                {\n                    \"process_tags_map\": {\n                        \"path_match\": \"process.tag.*\",\n                        \"mapping\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        }\n                    }\n                }\n            ],\n            \"properties\": {\n                \"traceID\": {\n                    \"type\": \"keyword\",\n                    \"ignore_above\": 256\n                },\n                \"spanID\": {\n                    \"type\": \"keyword\",\n                    \"ignore_above\": 256\n                },\n                \"operationName\": {\n                    \"type\": \"keyword\",\n                    \"ignore_above\": 256\n                },\n                \"parentSpanID\": {\n                    \"type\": \"keyword\",\n                    \"ignore_above\": 256\n                },\n                \"startTime\": {\n                    \"type\": \"date\",\n                    \"format\": \"epoch_millis\"\n                },\n                \"startTimeMillis\": {\n                    \"type\": \"date\",\n                    \"format\": \"epoch_millis\"\n                },\n                \"duration\": {\n                    \"type\": \"long\"\n                },\n                \"flags\": {\n                    \"type\": \"integer\"\n                },\n                \"logs\": {\n                    \"type\": \"nested\",\n                    \"dynamic\": false,\n                    \"properties\": {\n                        \"timestamp\": {\n                            \"type\": \"date\",\n                            \"format\": \"epoch_millis\"\n                        },\n                        \"fields\": {\n                            \"type\": \"nested\",\n                            \"dynamic\": false,\n                            \"properties\": {\n                                \"key\": {\n                                    \"type\": \"keyword\",\n                                    \"ignore_above\": 256\n                                },\n                                \"value\": {\n                                    \"type\": \"keyword\",\n                                    \"ignore_above\": 256\n                                },\n                                \"type\": {\n                                    \"type\": \"keyword\",\n                                    \"ignore_above\": 256\n                                }\n                            }\n                        }\n                    }\n                },\n                \"process\": {\n                    \"properties\": {\n                        \"serviceName\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        },\n                        \"tag\": {\n                            \"type\": \"object\"\n                        },\n                        \"tags\": {\n                            \"type\": \"nested\",\n                            \"dynamic\": false,\n                            \"properties\": {\n                                \"key\": {\n                                    \"type\": \"keyword\",\n                                    \"ignore_above\": 256\n                                },\n                                \"value\": {\n                                    \"type\": \"keyword\",\n                                    \"ignore_above\": 256\n                                },\n                                \"type\": {\n                                    \"type\": \"keyword\",\n                                    \"ignore_above\": 256\n                                }\n                            }\n                        }\n                    }\n                },\n                \"references\": {\n                    \"type\": \"nested\",\n                    \"dynamic\": false,\n                    \"properties\": {\n                        \"refType\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        },\n                        \"traceID\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        },\n                        \"spanID\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        }\n                    }\n                },\n                \"tag\": {\n                    \"type\": \"object\"\n                },\n                \"tags\": {\n                    \"type\": \"nested\",\n                    \"dynamic\": false,\n                    \"properties\": {\n                        \"key\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        },\n                        \"value\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        },\n                        \"type\": {\n                            \"type\": \"keyword\",\n                            \"ignore_above\": 256\n                        }\n                    }\n                }\n            }\n        }\n    }\n}"
        	            	actual  : "{\n  \"index_patterns\": [\"test-jaeger-span*\"],\n  \"priority\": 500,\n  \"template\": {\n    \"settings\": {\n      \"index\": {\n        \"number_of_shards\": 3,\n        \"number_of_replicas\": 3,\n        \"mapping\": {\n          \"total_fields\": {\n            \"limit\": 3000\n          },\n          \"nested_objects\": {\n            \"limit\": 50\n          }\n        },\n        \"default_pipeline\": \"jaeger-trace-time-to-timestamp\",\n        \"lifecycle\": {\n          \"name\": \"jaeger-test-policy\",\n          \"rollover_alias\": \"test-jaeger-span-write\"\n        }\n      }\n    },\n    \"mappings\": {\n      \"dynamic_templates\": [\n        {\n          \"span_tags_map\": {\n            \"path_match\": \"tag.*\",\n            \"mapping\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            }\n          }\n        },\n        {\n          \"process_tags_map\": {\n            \"path_match\": \"process.tag.*\",\n            \"mapping\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            }\n          }\n        }\n      ],\n      \"properties\": {\n        \"traceID\": {\n          \"type\": \"keyword\",\n          \"ignore_above\": 256\n        },\n        \"spanID\": {\n          \"type\": \"keyword\",\n          \"ignore_above\": 256\n        },\n        \"operationName\": {\n          \"type\": \"keyword\",\n          \"ignore_above\": 256\n        },\n        \"parentSpanID\": {\n          \"type\": \"keyword\",\n          \"ignore_above\": 256\n        },\n        \"startTime\": {\n          \"type\": \"date\",\n          \"format\": \"epoch_millis\"\n        },\n        \"startTimeMillis\": {\n          \"type\": \"date\",\n          \"format\": \"epoch_millis\"\n        },\n        \"duration\": {\n          \"type\": \"long\"\n        },\n        \"flags\": {\n          \"type\": \"integer\"\n        },\n        \"logs\": {\n          \"type\": \"nested\",\n          \"dynamic\": false,\n          \"properties\": {\n            \"timestamp\": {\n              \"type\": \"date\",\n              \"format\": \"epoch_millis\"\n            },\n            \"fields\": {\n              \"type\": \"nested\",\n              \"dynamic\": false,\n              \"properties\": {\n                \"key\": {\n                  \"type\": \"keyword\",\n                  \"ignore_above\": 256\n                },\n                \"value\": {\n                  \"type\": \"keyword\",\n                  \"ignore_above\": 256\n                },\n                \"type\": {\n                  \"type\": \"keyword\",\n                  \"ignore_above\": 256\n                }\n              }\n            }\n          }\n        },\n        \"process\": {\n          \"properties\": {\n            \"serviceName\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            },\n            \"tag\": {\n              \"type\": \"object\"\n            },\n            \"tags\": {\n              \"type\": \"nested\",\n              \"dynamic\": false,\n              \"properties\": {\n                \"key\": {\n                  \"type\": \"keyword\",\n                  \"ignore_above\": 256\n                },\n                \"value\": {\n                  \"type\": \"keyword\",\n                  \"ignore_above\": 256\n                },\n                \"type\": {\n                  \"type\": \"keyword\",\n                  \"ignore_above\": 256\n                }\n              }\n            }\n          }\n        },\n        \"references\": {\n          \"type\": \"nested\",\n          \"dynamic\": false,\n          \"properties\": {\n            \"refType\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            },\n            \"traceID\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            },\n            \"spanID\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            }\n          }\n        },\n        \"tag\": {\n          \"type\": \"object\"\n        },\n        \"tags\": {\n          \"type\": \"nested\",\n          \"dynamic\": false,\n          \"properties\": {\n            \"key\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            },\n            \"value\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            },\n            \"type\": {\n              \"type\": \"keyword\",\n              \"ignore_above\": 256\n            }\n          }\n        }\n      }\n    }\n  }\n}\n"
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1,177 +1,176 @@
        	            	 {
        	            	-    "index_patterns": [
        	            	-        "test-jaeger-span*"
        	            	-    ],
        	            	-    "priority": 500,
        	            	-    "template": {
        	            	-        "settings": {
        	            	-            "index": {
        	            	-                "number_of_shards": 3,
        	            	-                "number_of_replicas": 3,
        	            	-                "mapping": {
        	            	-                    "total_fields": {
        	            	-                        "limit": 3000
        	            	-                    },
        	            	-                    "nested_objects": {
        	            	-                        "limit": 50
        	            	-                    }
        	            	+  "index_patterns": ["test-jaeger-span*"],
        	            	+  "priority": 500,
        	            	+  "template": {
        	            	+    "settings": {
        	            	+      "index": {
        	            	+        "number_of_shards": 3,
        	            	+        "number_of_replicas": 3,
        	            	+        "mapping": {
        	            	+          "total_fields": {
        	            	+            "limit": 3000
        	            	+          },
        	            	+          "nested_objects": {
        	            	+            "limit": 50
        	            	+          }
        	            	+        },
        	            	+        "default_pipeline": "jaeger-trace-time-to-timestamp",
        	            	+        "lifecycle": {
        	            	+          "name": "jaeger-test-policy",
        	            	+          "rollover_alias": "test-jaeger-span-write"
        	            	+        }
        	            	+      }
        	            	+    },
        	            	+    "mappings": {
        	            	+      "dynamic_templates": [
        	            	+        {
        	            	+          "span_tags_map": {
        	            	+            "path_match": "tag.*",
        	            	+            "mapping": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            }
        	            	+          }
        	            	+        },
        	            	+        {
        	            	+          "process_tags_map": {
        	            	+            "path_match": "process.tag.*",
        	            	+            "mapping": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            }
        	            	+          }
        	            	+        }
        	            	+      ],
        	            	+      "properties": {
        	            	+        "traceID": {
        	            	+          "type": "keyword",
        	            	+          "ignore_above": 256
        	            	+        },
        	            	+        "spanID": {
        	            	+          "type": "keyword",
        	            	+          "ignore_above": 256
        	            	+        },
        	            	+        "operationName": {
        	            	+          "type": "keyword",
        	            	+          "ignore_above": 256
        	            	+        },
        	            	+        "parentSpanID": {
        	            	+          "type": "keyword",
        	            	+          "ignore_above": 256
        	            	+        },
        	            	+        "startTime": {
        	            	+          "type": "date",
        	            	+          "format": "epoch_millis"
        	            	+        },
        	            	+        "startTimeMillis": {
        	            	+          "type": "date",
        	            	+          "format": "epoch_millis"
        	            	+        },
        	            	+        "duration": {
        	            	+          "type": "long"
        	            	+        },
        	            	+        "flags": {
        	            	+          "type": "integer"
        	            	+        },
        	            	+        "logs": {
        	            	+          "type": "nested",
        	            	+          "dynamic": false,
        	            	+          "properties": {
        	            	+            "timestamp": {
        	            	+              "type": "date",
        	            	+              "format": "epoch_millis"
        	            	+            },
        	            	+            "fields": {
        	            	+              "type": "nested",
        	            	+              "dynamic": false,
        	            	+              "properties": {
        	            	+                "key": {
        	            	+                  "type": "keyword",
        	            	+                  "ignore_above": 256
        	            	                 },
        	            	-                "default_pipeline": "jaeger-trace-time-to-timestamp",
        	            	-                "lifecycle": {
        	            	-                    "name": "jaeger-test-policy",
        	            	-                    "rollover_alias": "test-jaeger-span-write"
        	            	+                "value": {
        	            	+                  "type": "keyword",
        	            	+                  "ignore_above": 256
        	            	+                },
        	            	+                "type": {
        	            	+                  "type": "keyword",
        	            	+                  "ignore_above": 256
        	            	                 }
        	            	+              }
        	            	             }
        	            	+          }
        	            	         },
        	            	-        "mappings": {
        	            	-            "dynamic_templates": [
        	            	-                {
        	            	-                    "span_tags_map": {
        	            	-                        "path_match": "tag.*",
        	            	-                        "mapping": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        }
        	            	-                    }
        	            	+        "process": {
        	            	+          "properties": {
        	            	+            "serviceName": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            },
        	            	+            "tag": {
        	            	+              "type": "object"
        	            	+            },
        	            	+            "tags": {
        	            	+              "type": "nested",
        	            	+              "dynamic": false,
        	            	+              "properties": {
        	            	+                "key": {
        	            	+                  "type": "keyword",
        	            	+                  "ignore_above": 256
        	            	                 },
        	            	-                {
        	            	-                    "process_tags_map": {
        	            	-                        "path_match": "process.tag.*",
        	            	-                        "mapping": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        }
        	            	-                    }
        	            	+                "value": {
        	            	+                  "type": "keyword",
        	            	+                  "ignore_above": 256
        	            	+                },
        	            	+                "type": {
        	            	+                  "type": "keyword",
        	            	+                  "ignore_above": 256
        	            	                 }
        	            	-            ],
        	            	-            "properties": {
        	            	-                "traceID": {
        	            	-                    "type": "keyword",
        	            	-                    "ignore_above": 256
        	            	-                },
        	            	-                "spanID": {
        	            	-                    "type": "keyword",
        	            	-                    "ignore_above": 256
        	            	-                },
        	            	-                "operationName": {
        	            	-                    "type": "keyword",
        	            	-                    "ignore_above": 256
        	            	-                },
        	            	-                "parentSpanID": {
        	            	-                    "type": "keyword",
        	            	-                    "ignore_above": 256
        	            	-                },
        	            	-                "startTime": {
        	            	-                    "type": "date",
        	            	-                    "format": "epoch_millis"
        	            	-                },
        	            	-                "startTimeMillis": {
        	            	-                    "type": "date",
        	            	-                    "format": "epoch_millis"
        	            	-                },
        	            	-                "duration": {
        	            	-                    "type": "long"
        	            	-                },
        	            	-                "flags": {
        	            	-                    "type": "integer"
        	            	-                },
        	            	-                "logs": {
        	            	-                    "type": "nested",
        	            	-                    "dynamic": false,
        	            	-                    "properties": {
        	            	-                        "timestamp": {
        	            	-                            "type": "date",
        	            	-                            "format": "epoch_millis"
        	            	-                        },
        	            	-                        "fields": {
        	            	-                            "type": "nested",
        	            	-                            "dynamic": false,
        	            	-                            "properties": {
        	            	-                                "key": {
        	            	-                                    "type": "keyword",
        	            	-                                    "ignore_above": 256
        	            	-                                },
        	            	-                                "value": {
        	            	-                                    "type": "keyword",
        	            	-                                    "ignore_above": 256
        	            	-                                },
        	            	-                                "type": {
        	            	-                                    "type": "keyword",
        	            	-                                    "ignore_above": 256
        	            	-                                }
        	            	-                            }
        	            	-                        }
        	            	-                    }
        	            	-                },
        	            	-                "process": {
        	            	-                    "properties": {
        	            	-                        "serviceName": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        },
        	            	-                        "tag": {
        	            	-                            "type": "object"
        	            	-                        },
        	            	-                        "tags": {
        	            	-                            "type": "nested",
        	            	-                            "dynamic": false,
        	            	-                            "properties": {
        	            	-                                "key": {
        	            	-                                    "type": "keyword",
        	            	-                                    "ignore_above": 256
        	            	-                                },
        	            	-                                "value": {
        	            	-                                    "type": "keyword",
        	            	-                                    "ignore_above": 256
        	            	-                                },
        	            	-                                "type": {
        	            	-                                    "type": "keyword",
        	            	-                                    "ignore_above": 256
        	            	-                                }
        	            	-                            }
        	            	-                        }
        	            	-                    }
        	            	-                },
        	            	-                "references": {
        	            	-                    "type": "nested",
        	            	-                    "dynamic": false,
        	            	-                    "properties": {
        	            	-                        "refType": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        },
        	            	-                        "traceID": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        },
        	            	-                        "spanID": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        }
        	            	-                    }
        	            	-                },
        	            	-                "tag": {
        	            	-                    "type": "object"
        	            	-                },
        	            	-                "tags": {
        	            	-                    "type": "nested",
        	            	-                    "dynamic": false,
        	            	-                    "properties": {
        	            	-                        "key": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        },
        	            	-                        "value": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        },
        	            	-                        "type": {
        	            	-                            "type": "keyword",
        	            	-                            "ignore_above": 256
        	            	-                        }
        	            	-                    }
        	            	-                }
        	            	+              }
        	            	             }
        	            	+          }
        	            	+        },
        	            	+        "references": {
        	            	+          "type": "nested",
        	            	+          "dynamic": false,
        	            	+          "properties": {
        	            	+            "refType": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            },
        	            	+            "traceID": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            },
        	            	+            "spanID": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            }
        	            	+          }
        	            	+        },
        	            	+        "tag": {
        	            	+          "type": "object"
        	            	+        },
        	            	+        "tags": {
        	            	+          "type": "nested",
        	            	+          "dynamic": false,
        	            	+          "properties": {
        	            	+            "key": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            },
        	            	+            "value": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            },
        	            	+            "type": {
        	            	+              "type": "keyword",
        	            	+              "ignore_above": 256
        	            	+            }
        	            	+          }
        	            	         }
        	            	+      }
        	            	     }
        	            	+  }
        	            	 }
        	            	+
        	Test:       	TestMappingBuilderGetMapping/jaeger-span
=== RUN   TestMappingBuilderGetMapping/jaeger-span#01
=== RUN   TestMappingBuilderGetMapping/jaeger-span#02
--- FAIL: TestMappingBuilderGetMapping (0.00s)
    --- FAIL: TestMappingBuilderGetMapping/jaeger-span (0.00s)
    --- PASS: TestMappingBuilderGetMapping/jaeger-span#01 (0.00s)
    --- PASS: TestMappingBuilderGetMapping/jaeger-span#02 (0.00s)
FAIL
FAIL	github.com/jaegertracing/jaeger/internal/storage/v1/elasticsearch/mappings	0.010s
FAIL
